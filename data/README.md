# 資料目錄說明

本目錄存放台股資料收集系統的所有原始資料。

## 📁 目錄結構

```
data/
├── raw/                    # 原始資料目錄
│   ├── price/              # 每日價格資料（開高低收、成交量）
│   ├── institutional/      # 三大法人買賣超資料（外資、投信、自營商）
│   ├── margin/             # 融資融券資料
│   └── lending/            # 借券賣出資料
└── README.md               # 本說明文件
```

## 📊 資料格式

### raw/ - 原始資料

所有原始資料採用 **按日期聚合** 的 JSON 格式儲存：

```
raw/
└── {type}/                 # 資料類型（price, institutional, margin, lending）
    └── {YYYY}/             # 年份目錄
        └── {MM}/           # 月份目錄
            └── {YYYY-MM-DD}.json  # 單日檔案，包含當日所有股票資料
```

#### 檔案命名規則
- **格式**: `YYYY-MM-DD.json`
- **範例**: `2025-12-28.json`
- **內容**: 當日所有股票（約 1,000～2,000 檔）的該類型資料

#### 資料類型說明

| 類型 | 目錄 | 說明 | 每日檔案大小 |
|------|------|------|--------------|
| **價格資料** | `price/` | 開盤價、最高價、最低價、收盤價、成交量 | ~600 KB |
| **三大法人** | `institutional/` | 外資、投信、自營商的買賣超金額與張數 | ~1 MB |
| **融資融券** | `margin/` | 融資/融券餘額、增減、使用率 | ~900 KB |
| **借券賣出** | `lending/` | 借券賣出餘額、增減 | ~450 KB |

### 檔案格式範例

每個 JSON 檔案包含兩個部分：

```json
{
  "metadata": {
    "date": "2025-12-28",
    "collected_at": "2025-12-28T18:30:45",
    "total_count": 1946,
    "source": "TWSE + TPEx Official API"
  },
  "data": [
    {
      "date": "2025-12-28",
      "stock_id": "2330",
      "stock_name": "台積電",
      "open": 1080.0,
      "high": 1095.0,
      "low": 1075.0,
      "close": 1090.0,
      "volume": 45678912,
      "type": "twse"
    },
    // ... 更多股票資料
  ]
}
```

## 📈 資料來源

- **上市股票**: 台灣證券交易所 (TWSE) 官方 API
- **上櫃股票**: 證券櫃買中心 (TPEx) 官方 API
- **更新時間**: 每交易日 18:00 自動收集
- **API 認證**: 無需 Token（使用官方免費 API）

## 🔄 資料更新

### 自動收集
- **每日收集**: GitHub Actions 每交易日 18:00 自動執行
- **回補資料**: 可透過 GitHub Actions 手動觸發回補任務

### 手動收集

```bash
# 收集今日所有資料
python scripts/run_collection.py

# 收集指定日期
python scripts/run_collection.py --date 2025-12-28

# 收集特定類型
python scripts/run_collection.py --date 2025-12-28 --types price margin
```

## 📊 資料統計

### 已收集資料範圍
- **起始日期**: 2025-01-01
- **資料類型**: 4 種（price, institutional, margin, lending）
- **總檔案數**: 約 240 個交易日 × 4 種類型 = ~960 個檔案/年
- **總大小**: 約 700 MB/年

### 單日資料量
- **總大小**: ~2.9 MB
- **總筆數**: ~5,800 筆
- **涵蓋範圍**: 1,000～2,000 檔股票（含上市+上櫃）

## 🔗 快速連結

- [價格資料](raw/price/) - 每日股票開高低收與成交量
- [三大法人](raw/institutional/) - 外資、投信、自營商買賣超
- [融資融券](raw/margin/) - 融資融券餘額與變化
- [借券賣出](raw/lending/) - 借券賣出餘額資料

## 📝 注意事項

1. **交易日限制**: 只有交易日才會有資料，週末和國定假日無資料
2. **資料完整性**: 某些股票在特定日期可能因停牌等原因無資料
3. **版本控制**: 所有資料檔案都納入 Git 版本控制，可追蹤歷史變更
4. **儲存空間**: 完整一年資料約需 700 MB 空間

---

**最後更新**: 2025-12-28
**維護者**: tw-stock-collector 專案團隊
