# 台股資料收集系統 - 專案路線圖

## 📅 專案階段規劃

### Phase 0: 專案初始化 ✅
**狀態**: 已完成
**完成日期**: 2025-12-28

- [x] 建立專案目錄結構
- [x] 撰寫系統規格書
- [x] 撰寫 FinMind 實作指南
- [x] 建立文檔中心
- [x] 設定 Git 版本控制

---

### Phase 1: 環境建置與基礎架構
**狀態**: 規劃中
**預計啟動**: 2025-12-29

#### 1.1 開發環境設定
- [ ] 建立 Python 虛擬環境
- [ ] 安裝相依套件 (requirements.txt)
- [ ] 設定環境變數 (.env)
- [ ] 測試 FinMind API 連線

#### 1.2 資料庫建置
- [ ] 選擇資料庫 (PostgreSQL / SQLite)
- [ ] 設計資料表結構
- [ ] 建立初始化 SQL 腳本
- [ ] 測試資料庫連線

#### 1.3 基礎架構程式碼
- [ ] 實作資料庫連線模組 (`src/database/connection.py`)
- [ ] 建立 ORM 模型 (`src/models/`)
- [ ] 實作日誌系統 (`src/utils/logger.py`)
- [ ] 實作日期工具 (`src/utils/date_utils.py`)

**預計完成**: 規劃中

---

### Phase 2: 核心資料收集器開發
**狀態**: 待啟動

#### 2.1 FinMind 基礎收集器
- [ ] 實作 FinMind 基礎收集器 (`src/collectors/finmind_collector.py`)
- [ ] 加入錯誤處理與重試機制
- [ ] 實作請求限流控制
- [ ] 單元測試

#### 2.2 價量資料收集
- [ ] 實作每日價量收集器 (`src/collectors/price_collector.py`)
- [ ] 實作還原股價收集器
- [ ] 批次收集功能
- [ ] 資料驗證機制

#### 2.3 籌碼資料收集
- [ ] 實作三大法人收集器 (`src/collectors/institutional_collector.py`)
- [ ] 實作融資融券收集器
- [ ] 實作外資持股收集器
- [ ] 實作股權分散表收集器
- [ ] 實作借券資料收集器
- [ ] 實作八大行庫收集器

**預計完成**: 規劃中

---

### Phase 3: 資料儲存與管理
**狀態**: 待啟動

#### 3.1 CRUD 操作
- [ ] 實作資料寫入功能 (`src/database/crud.py`)
- [ ] 實作資料更新功能
- [ ] 實作重複資料處理
- [ ] 實作資料查詢功能

#### 3.2 股票清單管理
- [ ] 實作股票清單取得 (`src/utils/stock_list.py`)
- [ ] 實作清單更新機制
- [ ] 上市/上櫃股票分類

#### 3.3 資料品質控制
- [ ] 實作資料驗證器 (`src/utils/validator.py`)
- [ ] 異常值檢測
- [ ] 資料完整性檢查

**預計完成**: 規劃中

---

### Phase 4: 自動化排程系統
**狀態**: 待啟動

#### 4.1 每日排程
- [ ] 實作每日收集排程器 (`src/schedulers/daily_scheduler.py`)
- [ ] 設定收集時間 (18:00)
- [ ] 交易日判斷機制
- [ ] 錯誤通知機制

#### 4.2 每週排程
- [ ] 實作每週收集排程器 (`src/schedulers/weekly_scheduler.py`)
- [ ] 股權分散表收集 (每週六)

#### 4.3 執行腳本
- [ ] 每日收集腳本 (`scripts/daily_collection.py`)
- [ ] 歷史資料回補腳本 (`scripts/backfill_history.py`)
- [ ] 資料庫初始化腳本 (`scripts/init_database.py`)

**預計完成**: 規劃中

---

### Phase 5: 測試與驗證
**狀態**: 待啟動

#### 5.1 單元測試
- [ ] 收集器測試 (`tests/test_collectors.py`)
- [ ] 資料庫測試 (`tests/test_database.py`)
- [ ] 工具函數測試 (`tests/test_utils.py`)

#### 5.2 整合測試
- [ ] 端到端資料收集測試
- [ ] 排程系統測試
- [ ] 錯誤處理測試

#### 5.3 資料驗證
- [ ] 與官方資料源比對
- [ ] 資料完整性檢查
- [ ] 效能測試

**預計完成**: 規劃中

---

### Phase 6: 部署與監控
**狀態**: 待啟動

#### 6.1 生產環境部署
- [ ] 設定 Cron Job / Systemd
- [ ] 或使用 APScheduler 常駐程序
- [ ] 日誌輪轉設定
- [ ] 資料庫備份機制

#### 6.2 監控與維護
- [ ] 系統運行狀態監控
- [ ] 錯誤日誌監控
- [ ] 資料品質監控
- [ ] 通知機制 (Email / Line / Telegram)

**預計完成**: 規劃中

---

### Phase 7: 進階功能 (選配)
**狀態**: 待規劃

#### 7.1 技術指標計算
- [ ] 整合 TA-Lib
- [ ] 計算常用技術指標 (MA, MACD, RSI, KD)
- [ ] 指標資料儲存

#### 7.2 籌碼分析功能
- [ ] 外資連續買超統計
- [ ] 融資使用率分析
- [ ] 主力集中度計算

#### 7.3 主力進出補充
- [ ] 券商分點排行計算
- [ ] 或爬蟲補充資料

#### 7.4 資料 API
- [ ] 使用 FastAPI 建立 REST API
- [ ] API 文檔 (Swagger)
- [ ] 權限控制

#### 7.5 資料視覺化
- [ ] Jupyter Notebook 分析範例
- [ ] 圖表產生
- [ ] 或整合 Grafana

**預計完成**: 待規劃

---

## 📊 進度追蹤

### 整體進度
- Phase 0: ✅ 100% (已完成)
- Phase 1: ⏳ 0% (規劃中)
- Phase 2: 📋 0% (待啟動)
- Phase 3: 📋 0% (待啟動)
- Phase 4: 📋 0% (待啟動)
- Phase 5: 📋 0% (待啟動)
- Phase 6: 📋 0% (待啟動)
- Phase 7: 💡 0% (待規劃)

### 里程碑

| 里程碑 | 目標日期 | 狀態 |
|--------|---------|------|
| 專案初始化完成 | 2025-12-28 | ✅ 完成 |
| 環境建置完成 | TBD | 📋 待定 |
| 資料收集器開發完成 | TBD | 📋 待定 |
| 自動化排程上線 | TBD | 📋 待定 |
| MVP 版本發布 | TBD | 📋 待定 |

---

## 🎯 當前優先事項

1. **Phase 1.1** - 開發環境設定
2. **Phase 1.2** - 資料庫建置
3. **Phase 2.1** - FinMind 基礎收集器

---

## 📝 備註

- 本路線圖為動態文件,會隨專案進展持續更新
- TBD (To Be Determined) 表示時程待確定
- 可根據實際開發情況調整優先順序

---

**最後更新**: 2025-12-28
**維護者**: Jason Huang
